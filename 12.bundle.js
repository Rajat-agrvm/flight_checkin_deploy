(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{115:function(e,a,s){"use strict";s.r(a);var t=s(19),l=s(18),n=s(94),r=s(27),i=s(0),u=s.n(i),d=function(e){var a=e.passenger,s=e.ancillaries,t=a.ancillary.length>0&&s.id&&a.ancillary.filter((function(e){return s.value[e]})).length>0;return u.a.createElement("table",{className:"table table-borderless"},u.a.createElement("tbody",null,u.a.createElement("tr",null,u.a.createElement("td",null,"PNR"),u.a.createElement("td",null,":"),u.a.createElement("td",null,a.pnr)),u.a.createElement("tr",null,u.a.createElement("td",null,"Name"),u.a.createElement("td",null,":"),u.a.createElement("td",null,a.name)),u.a.createElement("tr",null,u.a.createElement("td",null,"Ancillary Service"),u.a.createElement("td",null,":"),u.a.createElement("td",null,t&&a.ancillary.map((function(e){return s.value[e].value})).join(", ")||"NIL")),u.a.createElement("tr",null,u.a.createElement("td",null,"Seat No."),u.a.createElement("td",null,":"),u.a.createElement("td",null,a.seat)),u.a.createElement("tr",null,u.a.createElement("td",null,"Wheel Chair"),u.a.createElement("td",null,":"),u.a.createElement("td",null,a.wheelChair?"YES":"NO")),u.a.createElement("tr",null,u.a.createElement("td",null,"Infants"),u.a.createElement("td",null,":"),u.a.createElement("td",null,a.infants))))},c=s(34),m=s(80),o=s(90),p=s(76),v=s(91),g=s(78),b=s(35);var h={loadPassengers:m.a,savePassenger:m.b,loadAncillaries:o.a};a.default=Object(c.b)((function(e,a){var s=a.match.params.name,t=a.match.params.pnr;console.log("mapStateToProps: passengerDetailsPage");var l=t&&e.passengers.length>0?function(e,a){return e.find((function(e){return e.pnr===a}))||p.newPassenger}(e.passengers,t):p.newPassenger,n=l.id?e.passengers.filter((function(e){return e.flightId===l.flightId})):[],r=e.ancillaries.length>0&&l.id?e.ancillaries.find((function(e){return e.id===l.flightId})):p.newAncillaries;return{passenger:l,flightAncillaries:r,flightPassengers:n,flightName:s,passengers:e.passengers}}),h)((function(e){var a=e.passengers,s=e.loadPassengers,c=e.savePassenger,m=e.loadAncillaries,o=e.flightAncillaries,p=e.flightName,h=e.history,f=Object(r.a)(e,["passengers","loadPassengers","savePassenger","loadAncillaries","flightAncillaries","flightName","history"]),E=Object(i.useState)(Object(l.a)({},f.passenger)),I=Object(n.a)(E,2),w=I[0],y=I[1],A=Object(i.useState)(Object(t.a)(f.flightPassengers)),B=Object(n.a)(A,2),N=B[0],P=B[1],C=Object(i.useState)(!1),S=Object(n.a)(C,2),k=S[0],j=S[1];return Object(i.useEffect)((function(){console.log("useEffect"),0===a.length?s().catch((function(e){return alert("Loading passengers failed "+e)})):(y(Object(l.a)({},f.passenger)),P(Object(t.a)(f.flightPassengers))),o.id||m().catch((function(e){return alert("Loading ancillaries failed "+e)}))}),[f.flightPassengers]),u.a.createElement(u.a.Fragment,null,u.a.createElement("h2",null,"Passenger Details"),o.id?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-md-7"},u.a.createElement(d,{passenger:w,ancillaries:o})),u.a.createElement("div",{className:"col-md-5"},u.a.createElement(v.a,{passengers:N,passenger:w,select:function(e){var a=w.wheelChair&&w.infants>0?"both":w.infants>0?"infants":w.wheelChair?"wheelChair":"reserved";y((function(s){var t=N.filter((function(a){return a.seat===e.number})).length>0;return Object(l.a)({},s,{seat:t&&s.seat===e.number?"":t?s.seat:e.number,status:t&&s.seat===e.number?"available":a})})),P((function(s){var t=N.filter((function(a){return a.seat===e.number})).length>0;return s.map((function(s){return s.id===w.id?s.seat===e.number?Object(l.a)({},s,{status:"available",seat:""}):t?s:Object(l.a)({},s,{seat:e.number,status:a}):s}))}))},onSave:function(e){e.preventDefault(),j(!0),c(w).then((function(){j(!1),b.toast.success("Passenger Updated"),h.push("/staff/passengers/"+p)})).catch((function(e){j(!1),b.toast.error("Updating Passenger failed"),console.log("failed to save passenger details"+e),h.push("/staff/passengers/"+p)}))},backUrl:"/staff/passengers/"+p,saving:k})))):u.a.createElement(g.a,null))}))},76:function(e,a){e.exports={mealPreferences:{1:{id:1,value:"VEG"},2:{id:2,value:"NON-VEG"},3:{id:3,value:"NO MEAL"}},newPassenger:{id:null,name:"",pnr:"",flightId:null,ancillary:[],wheelChair:null,infants:0,seat:"",status:"available",mealPreference:null,specialMeals:[],purchase:[],passport:null,address:"",dob:""},newAncillaries:{id:null,value:[]},flights:[{id:1,name:"E301",departure:"13:00",destination:"Hyderabad",passengers:3,ancillariesId:1,purchases:{1:{id:1,value:"fitbit"},2:{id:2,value:"Smartwatch"},3:{id:3,value:"Bluetooth speaker"},4:{id:4,value:"EarPods"}},specialMeals:{1:{id:1,value:"Veg Sandwich"},2:{id:2,value:"Beverages"},3:{id:3,value:"Biriyani"},4:{id:4,value:"Fried Rice"}}},{id:2,name:"E302",departure:"14:00",destination:"Delhi",passengers:2,ancillariesId:2,purchases:{1:{id:1,value:"fitbit"},2:{id:2,value:"Smartwatch"},3:{id:3,value:"Bluetooth speaker"},4:{id:4,value:"EarPods"}},specialMeals:{1:{id:1,value:"Veg Sandwich"},2:{id:2,value:"Beverages"},3:{id:3,value:"Biriyani"},4:{id:4,value:"Fried Rice"}}},{id:3,name:"E303",departure:"15:00",destination:"Mumbai",passengers:3,ancillariesId:3,purchases:{1:{id:1,value:"fitbit"},2:{id:2,value:"Smartwatch"},3:{id:3,value:"Bluetooth speaker"},4:{id:4,value:"EarPods"}},specialMeals:{1:{id:1,value:"Veg Sandwich"},2:{id:2,value:"Beverages"},3:{id:3,value:"Biriyani"},4:{id:4,value:"Fried Rice"}}},{id:4,name:"E304",departure:"12:00",destination:"Jaipur",passengers:0,ancillariesId:4,purchases:{1:{id:1,value:"fitbit"},2:{id:2,value:"Smartwatch"},3:{id:3,value:"Bluetooth speaker"},4:{id:4,value:"EarPods"}},specialMeals:{1:{id:1,value:"Veg Sandwich"},2:{id:2,value:"Beverages"},3:{id:3,value:"Biriyani"},4:{id:4,value:"Fried Rice"}}}],passengers:[{id:1,name:"Scott Allen",pnr:"IND101",flightId:1,ancillary:[],wheelChair:!1,infants:0,seat:"",status:"available",mealPreference:1,purchase:[1],specialMeals:[],passport:!0,address:"xyz",dob:"1995-12-10"},{id:2,name:"Corey Hose",pnr:"IND102",flightId:1,ancillary:[4],wheelChair:!1,infants:0,seat:"1B",status:"reserved",mealPreference:2,purchase:[2],specialMeals:[1],passport:!0,address:"xyd",dob:"1994-12-10"},{id:3,name:"James",pnr:"IND103",flightId:1,ancillary:[],wheelChair:!0,infants:0,seat:"2A",status:"wheelChair",mealPreference:1,purchase:[],specialMeals:[1,2],passport:!1,address:"xyq",dob:"1995-12-11"},{id:4,name:"Bond",pnr:"IND104",flightId:2,ancillary:[1],wheelChair:!1,infants:1,seat:"2A",status:"infants",mealPreference:3,purchase:[],specialMeals:[3],passport:!0,address:"",dob:"1994-12-10"},{id:5,name:"Kevin",pnr:"IND105",flightId:2,ancillary:[],wheelChair:!1,infants:1,seat:"4A",status:"infants",mealPreference:1,purchase:[3],specialMeals:[4],passport:!1,address:"xlz",dob:""},{id:6,name:"Roger",pnr:"IND106",flightId:3,ancillary:[],wheelChair:!0,infants:0,seat:"1A",status:"wheelChair",mealPreference:3,purchase:[1],specialMeals:[2,3],passport:!0,address:"",dob:""},{id:7,name:"Sai",pnr:"IND107",flightId:3,ancillary:[],wheelChair:!1,infants:0,seat:"2B",status:"reserved",mealPreference:2,purchase:[1,3],specialMeals:[],passport:!0,address:"tyz",dob:"1995-12-01"},{id:8,name:"Rahul",pnr:"IND108",flightId:3,ancillary:[1],wheelChair:!1,infants:0,seat:"3A",status:"reserved",mealPreference:3,purchase:[],specialMeals:[],passport:!1,address:"pyz",dob:""}],purchases:{1:{id:1,value:"fitbit"},2:{id:2,value:"Smartwatch"},3:{id:3,value:"Bluetooth speaker"},4:{id:4,value:"EarPods"}},ancillaries:[{id:1,value:{1:{id:1,value:"seat-plus"},2:{id:2,value:"Excess Baggage"},3:{id:3,value:"Fast Forward"},4:{id:4,value:"Travel Assistance"}}},{id:2,value:{1:{id:1,value:"seat-plus"},2:{id:2,value:"Excess Baggage"},3:{id:3,value:"Fast Forward"},4:{id:4,value:"Travel Assistance"}}},{id:3,value:{1:{id:1,value:"seat-plus"},2:{id:2,value:"Excess Baggage"},3:{id:3,value:"Fast Forward"},4:{id:4,value:"Travel Assistance"}}},{id:4,value:{1:{id:1,value:"seat-plus"},2:{id:2,value:"Excess Baggage"},3:{id:3,value:"Fast Forward"},4:{id:4,value:"Travel Assistance"}}}],newFlight:{id:null,name:"",departure:"",destination:"",passengers:null,ancillariesId:null,purchases:{},specialMeals:{}},seatMaps:[{id:1,seatmap:[{id:1,number:"1A",status:"reserved",passengerId:1},{id:2,number:"1B",status:"reserved",passengerId:2},{id:3,number:"2A",status:"reserved",passengerId:3},{id:4,number:"2B",status:"available",passengerId:null},{id:5,number:"3A",status:"available",passengerId:null},{id:6,number:"3B",status:"available",passengerId:null},{id:7,number:"4A",status:"available",passengerId:null},{id:8,number:"4B",status:"available",passengerId:null}]},{id:2,seatmap:[{id:1,number:"1A",status:"available",passengerId:null},{id:2,number:"1B",status:"available",passengerId:null},{id:3,number:"2A",status:"reserved",passengerId:4},{id:4,number:"2B",status:"available",passengerId:null},{id:5,number:"3A",status:"available",passengerId:null},{id:6,number:"3B",status:"available",passengerId:null},{id:7,number:"4A",status:"reserved",passengerId:5},{id:8,number:"4B",status:"available",passengerId:null}]},{id:3,seatmap:[{id:1,number:"1A",status:"reserved",passengerId:6},{id:2,number:"1B",status:"available",passengerId:null},{id:3,number:"2A",status:"available",passengerId:null},{id:4,number:"2B",status:"reserved",passengerId:7},{id:5,number:"3A",status:"reserved",passengerId:8},{id:6,number:"3B",status:"available",passengerId:null},{id:7,number:"4A",status:"available",passengerId:null},{id:8,number:"4B",status:"available",passengerId:null}]},{id:4,seatmap:[{id:1,number:"1A",status:"available",passengerId:null},{id:2,number:"1B",status:"available",passengerId:null},{id:3,number:"2A",status:"available",passengerId:null},{id:4,number:"2B",status:"available",passengerId:null},{id:5,number:"3A",status:"available",passengerId:null},{id:6,number:"3B",status:"available",passengerId:null},{id:7,number:"4A",status:"available",passengerId:null},{id:8,number:"4B",status:"available",passengerId:null}]}],newSeatMap:{id:1,seatmap:[{id:1,number:"1A",status:"available",passengerId:null},{id:2,number:"1B",status:"available",passengerId:null},{id:3,number:"2A",status:"available",passengerId:null},{id:4,number:"2B",status:"available",passengerId:null},{id:5,number:"3A",status:"available",passengerId:null},{id:6,number:"3B",status:"available",passengerId:null},{id:7,number:"4A",status:"available",passengerId:null},{id:8,number:"4B",status:"available",passengerId:null}]},newSeat:{id:null,number:"",status:"",passengerId:null}}},90:function(e,a,s){"use strict";var t=s(8),l=s(75),n="https://my-json-server.typicode.com/rajat-agrvm/mock-json-server/ancillaries/";function r(){return function(e){return fetch(n).then(l.b).catch(l.a).then((function(a){e(function(e){return{type:t.e,ancillaries:e}}(a))})).catch((function(e){throw e}))}}function i(e){return function(a,s){return function(e){return fetch(n+(e.id||""),{method:e.id?"PUT":"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(l.b).catch(l.a)}(e).then((function(s){e.id?a(function(e){return{type:t.h,ancillary:e}}(s)):a(function(e){return{type:t.a,ancillary:e}}(s))})).catch((function(e){throw e}))}}s.d(a,"a",(function(){return r})),s.d(a,"b",(function(){return i}))},91:function(e,a,s){"use strict";var t=s(0),l=s.n(t),n=(s(92),s(76)),r=s(17);a.a=function(e){var a=e.passenger,s=e.passengers,t=e.select,i=e.onSave,u=e.backUrl,d=e.inFlight,c=void 0!==d&&d,m=e.isAdmin,o=void 0!==m&&m,p=e.saving,v=void 0!==p&&p,g=c?s.map((function(e){return e.seat&&e.specialMeals.length>0?{seat:e.seat,status:"special-meal"}:e.seat?{seat:e.seat,status:"reserved"}:{}})):s.map((function(e){var a=e.wheelChair&&e.infants>0?"both":e.infants>0?"infants":e.wheelChair?"wheelChair":"reserved";return e.seat?{seat:e.seat,status:a}:{}}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-8"},n.newSeatMap.seatmap.map((function(e){return l.a.createElement("div",{key:e.id},l.a.createElement("div",{id:e.id,name:e.number,className:a&&a.seat===e.number?"selected":s.length>0?(g.find((function(a){return a.seat===e.number}))||{status:"available"}).status:e.status,onClick:a&&function(){return t({id:e.id,number:e.number})}},l.a.createElement("h4",{id:"seat-number"},e.number)),parseInt(e.id,10)%2==0&&l.a.createElement("div",{className:"clearBoth"}))})),l.a.createElement("div",{className:"row"},a&&!o&&l.a.createElement("div",{className:"col"},l.a.createElement("button",{style:{marginTop:20},className:"btn btn-primary",onClick:a&&i},v?"saving..":"save")),l.a.createElement("div",{className:"col"},l.a.createElement(r.b,{style:{marginTop:20},className:"btn btn-primary",to:u},"Back")))),l.a.createElement("div",{className:"col-4"},l.a.createElement("div",{className:"colorCode",style:{background:"#d8d8d8"}}),"Available",l.a.createElement("div",{className:"colorCode",style:{background:"#ffa500"}}),"Reserved",c?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"colorCode",style:{background:"#ac0788"}}),"Special Meal"):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"colorCode",style:{background:"#3366cc"}}),"selected",l.a.createElement("div",{className:"colorCode",style:{background:"#c52b44"}}),"WheelChair",l.a.createElement("div",{className:"colorCode",style:{background:"#ac0788"}}),"Infants",l.a.createElement("div",{className:"colorCode",style:{background:"#04640c"}}),"WheelChair + Infants"))),a&&l.a.createElement("p",{className:"information"},"**Click on the same seat to de-select"))}},92:function(e,a,s){}}]);
//# sourceMappingURL=12.bundle.js.map