(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{116:function(e,a,t){"use strict";t.r(a);var n=t(85),s=t(86),r=t(88),l=t(87),i=t(89),u=t(0),d=t.n(u),c=t(17),o=function(e){var a=e.passengers,t=e.flightName,n=e.ancillaries;return d.a.createElement("table",{className:"table"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"PNR"),d.a.createElement("th",null,"Name"),d.a.createElement("th",null,"Ancillary Service"),d.a.createElement("th",null,"Seat No."),d.a.createElement("th",null,"Passport"),d.a.createElement("th",null,"Date of Birth"),d.a.createElement("th",null,"Address"))),d.a.createElement("tbody",null,a.map((function(e){var a=e.ancillary.length>0&&n.id&&e.ancillary.filter((function(e){return n.value[e]})).length>0;return d.a.createElement("tr",{key:e.id},d.a.createElement("td",null,e.pnr,d.a.createElement(c.b,{style:{marginLeft:10},to:"/admin/passenger/"+t+"/"+e.pnr,className:"btn btn-sm btn-outline-primary"},"update")),d.a.createElement("td",null,e.name),d.a.createElement("td",null,a?e.ancillary.map((function(e){return n.value[e]&&d.a.createElement("div",{key:e},n.value[e].value)})):"NIL"),d.a.createElement("td",null,e.seat?e.seat:"--"),d.a.createElement("td",null,e.passport&&!0===e.passport?"YES":"NO"),d.a.createElement("td",null,e.dob?e.dob:"--"),d.a.createElement("td",null,e.address?e.address:"--"))}))))},p=t(34),h=t(15),f=t(77),g=t(80),m=t(76),v=t(97),b=t(95),I=t(90),y=t(78),w=function(e){function a(){var e,t;Object(n.a)(this,a);for(var s=arguments.length,i=new Array(s),u=0;u<s;u++)i[u]=arguments[u];return(t=Object(r.a)(this,(e=Object(l.a)(a)).call.apply(e,[this].concat(i)))).state={passengers:[]},t.handleFilter=function(e){"passport"===e?t.setState({passengers:t.props.passengers.filter((function(e){return!e.passport}))}):"address"===e?t.setState({passengers:t.props.passengers.filter((function(e){return!e.address}))}):"dob"===e?t.setState({passengers:t.props.passengers.filter((function(e){return!e.dob}))}):t.setState({passengers:t.props.passengers})},t}return Object(i.a)(a,e),Object(s.a)(a,[{key:"componentDidMount",value:function(){console.log("component did mount"+JSON.stringify(this.props.passengers));var e=this.props,a=e.loadFlights,t=e.flights,n=e.passengers,s=e.loadPassengers,r=e.flightAncillaries,l=e.loadAncillaries;0===t.length&&a().catch((function(e){return alert("Loading flights failed "+e)})),r.id||l().catch((function(e){return alert("Loading ancillaries failed "+e)})),0===n.length?s().catch((function(e){return alert("Loading passengers failed "+e)})):this.setState({passengers:this.props.passengers})}},{key:"componentDidUpdate",value:function(e){e.passengers!==this.props.passengers&&(console.log(JSON.stringify(this.props.passengers)),this.setState({passengers:this.props.passengers}))}},{key:"render",value:function(){var e=this;return d.a.createElement(d.a.Fragment,null,d.a.createElement("h2",null,"Passengers"),0!==this.props.flights.length&&this.props.passengers?d.a.createElement(d.a.Fragment,null,d.a.createElement("div",null,d.a.createElement(c.b,{style:{marginBottom:20},to:"/admin/passenger/"+this.props.name,className:"btn btn-primary"},"Add Passenger"),d.a.createElement(v.a,{style:{float:"right"},id:"filter-button",variant:"info",title:"Filter"},d.a.createElement(b.a.Item,{onSelect:function(){return e.handleFilter("passport")}},"Missing Passport"),d.a.createElement(b.a.Item,{onSelect:function(){return e.handleFilter("address")}},"Missing Address"),d.a.createElement(b.a.Item,{onSelect:function(){return e.handleFilter("dob")}},"Missing DOB"),d.a.createElement(b.a.Item,{onSelect:function(){return e.handleFilter("")}},"Clear filters..."))),d.a.createElement(o,{passengers:this.state.passengers,flightName:this.props.name,ancillaries:this.props.flightAncillaries})):d.a.createElement(y.a,null))}}]),a}(d.a.Component);a.default=Object(p.b)((function(e,a){var t=a.match.params.name,n=t&&e.flights.length>0?function(e,a){return e.find((function(e){return e.name===a}))||null}(e.flights,t):m.newFlight,s=n&&e.passengers.length>0?e.passengers.filter((function(e){return e.flightId===n.id})):[];return{name:t,flightAncillaries:e.ancillaries.length>0&&n.id?e.ancillaries.find((function(e){return e.id===n.ancillariesId})):m.newAncillaries,flights:e.flights,passengers:s}}),(function(e){return{loadFlights:Object(h.b)(f.a,e),loadPassengers:Object(h.b)(g.a,e),savePassenger:Object(h.b)(g.b,e),loadAncillaries:Object(h.b)(I.a,e)}}))(w)},75:function(e,a,t){"use strict";t.d(a,"b",(function(){return l})),t.d(a,"a",(function(){return u}));var n=t(81),s=t.n(n),r=t(82);function l(e){return i.apply(this,arguments)}function i(){return(i=Object(r.a)(s.a.mark((function e(a){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok){e.next=2;break}return e.abrupt("return",a.json());case 2:if(400!==a.status){e.next=7;break}return e.next=5,a.text();case 5:throw t=e.sent,new Error(t);case 7:throw new Error("Network response was not ok.");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){throw console.error("API call failed. "+e),e}},76:function(e,a){e.exports={mealPreferences:{1:{id:1,value:"VEG"},2:{id:2,value:"NON-VEG"},3:{id:3,value:"NO MEAL"}},newPassenger:{id:null,name:"",pnr:"",flightId:null,ancillary:[],wheelChair:null,infants:0,seat:"",status:"available",mealPreference:null,specialMeals:[],purchase:[],passport:null,address:"",dob:""},newAncillaries:{id:null,value:[]},flights:[{id:1,name:"E301",departure:"13:00",destination:"Hyderabad",passengers:3,ancillariesId:1,purchases:{1:{id:1,value:"fitbit"},2:{id:2,value:"Smartwatch"},3:{id:3,value:"Bluetooth speaker"},4:{id:4,value:"EarPods"}},specialMeals:{1:{id:1,value:"Veg Sandwich"},2:{id:2,value:"Beverages"},3:{id:3,value:"Biriyani"},4:{id:4,value:"Fried Rice"}}},{id:2,name:"E302",departure:"14:00",destination:"Delhi",passengers:2,ancillariesId:2,purchases:{1:{id:1,value:"fitbit"},2:{id:2,value:"Smartwatch"},3:{id:3,value:"Bluetooth speaker"},4:{id:4,value:"EarPods"}},specialMeals:{1:{id:1,value:"Veg Sandwich"},2:{id:2,value:"Beverages"},3:{id:3,value:"Biriyani"},4:{id:4,value:"Fried Rice"}}},{id:3,name:"E303",departure:"15:00",destination:"Mumbai",passengers:3,ancillariesId:3,purchases:{1:{id:1,value:"fitbit"},2:{id:2,value:"Smartwatch"},3:{id:3,value:"Bluetooth speaker"},4:{id:4,value:"EarPods"}},specialMeals:{1:{id:1,value:"Veg Sandwich"},2:{id:2,value:"Beverages"},3:{id:3,value:"Biriyani"},4:{id:4,value:"Fried Rice"}}},{id:4,name:"E304",departure:"12:00",destination:"Jaipur",passengers:0,ancillariesId:4,purchases:{1:{id:1,value:"fitbit"},2:{id:2,value:"Smartwatch"},3:{id:3,value:"Bluetooth speaker"},4:{id:4,value:"EarPods"}},specialMeals:{1:{id:1,value:"Veg Sandwich"},2:{id:2,value:"Beverages"},3:{id:3,value:"Biriyani"},4:{id:4,value:"Fried Rice"}}}],passengers:[{id:1,name:"Scott Allen",pnr:"IND101",flightId:1,ancillary:[],wheelChair:!1,infants:0,seat:"",status:"available",mealPreference:1,purchase:[1],specialMeals:[],passport:!0,address:"xyz",dob:"1995-12-10"},{id:2,name:"Corey Hose",pnr:"IND102",flightId:1,ancillary:[4],wheelChair:!1,infants:0,seat:"1B",status:"reserved",mealPreference:2,purchase:[2],specialMeals:[1],passport:!0,address:"xyd",dob:"1994-12-10"},{id:3,name:"James",pnr:"IND103",flightId:1,ancillary:[],wheelChair:!0,infants:0,seat:"2A",status:"wheelChair",mealPreference:1,purchase:[],specialMeals:[1,2],passport:!1,address:"xyq",dob:"1995-12-11"},{id:4,name:"Bond",pnr:"IND104",flightId:2,ancillary:[1],wheelChair:!1,infants:1,seat:"2A",status:"infants",mealPreference:3,purchase:[],specialMeals:[3],passport:!0,address:"",dob:"1994-12-10"},{id:5,name:"Kevin",pnr:"IND105",flightId:2,ancillary:[],wheelChair:!1,infants:1,seat:"4A",status:"infants",mealPreference:1,purchase:[3],specialMeals:[4],passport:!1,address:"xlz",dob:""},{id:6,name:"Roger",pnr:"IND106",flightId:3,ancillary:[],wheelChair:!0,infants:0,seat:"1A",status:"wheelChair",mealPreference:3,purchase:[1],specialMeals:[2,3],passport:!0,address:"",dob:""},{id:7,name:"Sai",pnr:"IND107",flightId:3,ancillary:[],wheelChair:!1,infants:0,seat:"2B",status:"reserved",mealPreference:2,purchase:[1,3],specialMeals:[],passport:!0,address:"tyz",dob:"1995-12-01"},{id:8,name:"Rahul",pnr:"IND108",flightId:3,ancillary:[1],wheelChair:!1,infants:0,seat:"3A",status:"reserved",mealPreference:3,purchase:[],specialMeals:[],passport:!1,address:"pyz",dob:""}],purchases:{1:{id:1,value:"fitbit"},2:{id:2,value:"Smartwatch"},3:{id:3,value:"Bluetooth speaker"},4:{id:4,value:"EarPods"}},ancillaries:[{id:1,value:{1:{id:1,value:"seat-plus"},2:{id:2,value:"Excess Baggage"},3:{id:3,value:"Fast Forward"},4:{id:4,value:"Travel Assistance"}}},{id:2,value:{1:{id:1,value:"seat-plus"},2:{id:2,value:"Excess Baggage"},3:{id:3,value:"Fast Forward"},4:{id:4,value:"Travel Assistance"}}},{id:3,value:{1:{id:1,value:"seat-plus"},2:{id:2,value:"Excess Baggage"},3:{id:3,value:"Fast Forward"},4:{id:4,value:"Travel Assistance"}}},{id:4,value:{1:{id:1,value:"seat-plus"},2:{id:2,value:"Excess Baggage"},3:{id:3,value:"Fast Forward"},4:{id:4,value:"Travel Assistance"}}}],newFlight:{id:null,name:"",departure:"",destination:"",passengers:null,ancillariesId:null,purchases:{},specialMeals:{}},seatMaps:[{id:1,seatmap:[{id:1,number:"1A",status:"reserved",passengerId:1},{id:2,number:"1B",status:"reserved",passengerId:2},{id:3,number:"2A",status:"reserved",passengerId:3},{id:4,number:"2B",status:"available",passengerId:null},{id:5,number:"3A",status:"available",passengerId:null},{id:6,number:"3B",status:"available",passengerId:null},{id:7,number:"4A",status:"available",passengerId:null},{id:8,number:"4B",status:"available",passengerId:null}]},{id:2,seatmap:[{id:1,number:"1A",status:"available",passengerId:null},{id:2,number:"1B",status:"available",passengerId:null},{id:3,number:"2A",status:"reserved",passengerId:4},{id:4,number:"2B",status:"available",passengerId:null},{id:5,number:"3A",status:"available",passengerId:null},{id:6,number:"3B",status:"available",passengerId:null},{id:7,number:"4A",status:"reserved",passengerId:5},{id:8,number:"4B",status:"available",passengerId:null}]},{id:3,seatmap:[{id:1,number:"1A",status:"reserved",passengerId:6},{id:2,number:"1B",status:"available",passengerId:null},{id:3,number:"2A",status:"available",passengerId:null},{id:4,number:"2B",status:"reserved",passengerId:7},{id:5,number:"3A",status:"reserved",passengerId:8},{id:6,number:"3B",status:"available",passengerId:null},{id:7,number:"4A",status:"available",passengerId:null},{id:8,number:"4B",status:"available",passengerId:null}]},{id:4,seatmap:[{id:1,number:"1A",status:"available",passengerId:null},{id:2,number:"1B",status:"available",passengerId:null},{id:3,number:"2A",status:"available",passengerId:null},{id:4,number:"2B",status:"available",passengerId:null},{id:5,number:"3A",status:"available",passengerId:null},{id:6,number:"3B",status:"available",passengerId:null},{id:7,number:"4A",status:"available",passengerId:null},{id:8,number:"4B",status:"available",passengerId:null}]}],newSeatMap:{id:1,seatmap:[{id:1,number:"1A",status:"available",passengerId:null},{id:2,number:"1B",status:"available",passengerId:null},{id:3,number:"2A",status:"available",passengerId:null},{id:4,number:"2B",status:"available",passengerId:null},{id:5,number:"3A",status:"available",passengerId:null},{id:6,number:"3B",status:"available",passengerId:null},{id:7,number:"4A",status:"available",passengerId:null},{id:8,number:"4B",status:"available",passengerId:null}]},newSeat:{id:null,number:"",status:"",passengerId:null}}},77:function(e,a,t){"use strict";var n=t(8),s=t(75),r="https://my-json-server.typicode.com/rajat-agrvm/mock-json-server/flights/";function l(){return function(e){return fetch(r).then(s.b).catch(s.a).then((function(a){e(function(e){return{type:n.f,flights:e}}(a))})).catch((function(e){throw e}))}}function i(e){return function(a,t){return function(e){return fetch(r+(e.id||""),{method:e.id?"PUT":"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(s.b).catch(s.a)}(e).then((function(t){e.id?a(function(e){return{type:n.i,flight:e}}(t)):a(function(e){return{type:n.b,flight:e}}(t))})).catch((function(e){throw e}))}}t.d(a,"a",(function(){return l})),t.d(a,"b",(function(){return i}))},78:function(e,a,t){"use strict";var n=t(0),s=t.n(n);t(79);a.a=function(){return s.a.createElement("div",{className:"loader"},"Loading...")}},79:function(e,a,t){},80:function(e,a,t){"use strict";var n=t(8),s=t(75),r="https://my-json-server.typicode.com/rajat-agrvm/mock-json-server/passengers/";function l(){return function(e){return fetch(r).then(s.b).catch(s.a).then((function(a){e(function(e){return{type:n.g,passengers:e}}(a))})).catch((function(e){throw e}))}}function i(e){return function(a,t){return function(e){return fetch(r+(e.id||""),{method:e.id?"PUT":"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(s.b).catch(s.a)}(e).then((function(t){e.id?a(function(e){return{type:n.k,passenger:e}}(t)):a(function(e){return{type:n.c,passenger:e}}(t))})).catch((function(e){throw e}))}}t.d(a,"a",(function(){return l})),t.d(a,"b",(function(){return i}))},90:function(e,a,t){"use strict";var n=t(8),s=t(75),r="https://my-json-server.typicode.com/rajat-agrvm/mock-json-server/ancillaries/";function l(){return function(e){return fetch(r).then(s.b).catch(s.a).then((function(a){e(function(e){return{type:n.e,ancillaries:e}}(a))})).catch((function(e){throw e}))}}function i(e){return function(a,t){return function(e){return fetch(r+(e.id||""),{method:e.id?"PUT":"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(s.b).catch(s.a)}(e).then((function(t){e.id?a(function(e){return{type:n.h,ancillary:e}}(t)):a(function(e){return{type:n.a,ancillary:e}}(t))})).catch((function(e){throw e}))}}t.d(a,"a",(function(){return l})),t.d(a,"b",(function(){return i}))}}]);
//# sourceMappingURL=8.bundle.js.map