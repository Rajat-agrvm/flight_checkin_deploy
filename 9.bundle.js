(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{112:function(e,a,s){"use strict";s.r(a);var t=s(36),n=s(19),l=s(18),r=s(94),i=s(27),u=s(0),d=s.n(u),c=function(e){var a=e.name,s=e.label,t=e.onChange,n=e.placeholder,l=e.value,r=e.inputType,i=void 0===r?"text":r,u=e.error,c="form-group";return u&&u.length>0&&(c+=" has-error"),d.a.createElement("div",{className:c},d.a.createElement("label",{htmlFor:a},s),d.a.createElement("div",{className:"field"},d.a.createElement("input",{type:i,min:0,max:2,name:a,className:"form-control",placeholder:n,value:l,onChange:t}),u&&d.a.createElement("div",{className:"alert alert-danger"},u)))},m=s(93),o=function(e){var a=e.name,s=e.label,t=e.onChange,n=e.value,l=e.error,r=e.min,i=void 0===r?"1947-08-15":r,u=e.max,c=void 0===u?"2002-01-01":u,m="form-group";return l&&l.length>0&&(m+=" has-error"),d.a.createElement("div",{className:m},d.a.createElement("label",{htmlFor:a},s),d.a.createElement("div",{className:"field"},d.a.createElement("input",{type:"date",name:a,className:"form-control",value:n,onChange:t,min:i,max:c}),l&&d.a.createElement("div",{className:"alert alert-danger"},l)))},v=function(e){var a=e.passenger,s=e.onSave,t=e.onChange,n=e.errors,l=void 0===n?{}:n,r=e.saving,i=void 0!==r&&r;return d.a.createElement("form",{onSubmit:s},d.a.createElement("h2",null,a.id?"Edit":"Add"," Passenger"),l.onSave&&d.a.createElement("div",{className:"alert alert-danger",role:"alert"},l.onSave),d.a.createElement(c,{name:"name",label:"Name",value:a.name,onChange:t,error:l.name}),d.a.createElement(c,{name:"seat",label:"Seat No.",value:a.seat,onChange:function(){},error:l.seat}),d.a.createElement(m.a,{name:"wheelChair",label:"wheelChair",value:a&&null!==a.wheelChair?a.wheelChair:"",defaultOption:"WheelChair required?",options:[{value:!0,text:"YES"},{value:!1,text:"NO"}],onChange:t}),d.a.createElement(c,{name:"infants",label:"Infants",inputType:"number",value:a.infants,onChange:t}),d.a.createElement(m.a,{name:"passport",label:"Passport",value:a&&null!==a.passport?a.passport:"",defaultOption:"passport available?",options:[{value:!0,text:"YES"},{value:!1,text:"NO"}],onChange:t}),d.a.createElement(c,{name:"address",label:"Address",value:a.address,onChange:t}),d.a.createElement(o,{name:"dob",label:"Date of birth",value:a.dob,onChange:t}),d.a.createElement("button",{type:"submit",className:"btn btn-primary"},i?"Saving...":"Save"))},p=s(34),g=s(80),h=s(76),b=s(91),f=s(77),E=s(78),I=s(35);var N={loadPassengers:g.a,savePassenger:g.b,loadFlights:f.a};a.default=Object(p.b)((function(e,a){var s,t,n=a.match.params.name,r=a.match.params.pnr,i=n&&e.flights.length>0?(s=e.flights,t=n,s.find((function(e){return e.name===t}))||null):h.newFlight,u=i.id?e.passengers.filter((function(e){return e.flightId===i.id})):[],d=e.passengers.length>0?"IND"+(e.passengers.length+101):"";return{passenger:r&&e.passengers.length>0?function(e,a){return e.find((function(e){return e.pnr===a}))||h.newPassenger}(e.passengers,r):Object(l.a)({},h.newPassenger,{pnr:d,flightId:i.id}),flightPassengers:u,flightName:n,passengers:e.passengers,flights:e.flights}}),N)((function(e){var a=e.passengers,s=e.loadPassengers,c=e.loadFlights,m=e.savePassenger,o=e.flightName,p=e.flights,g=e.history,h=Object(i.a)(e,["passengers","loadPassengers","loadFlights","savePassenger","flightName","flights","history"]),f=Object(u.useState)(Object(l.a)({},h.passenger)),N=Object(r.a)(f,2),w=N[0],C=N[1],y=Object(u.useState)(Object(n.a)(h.flightPassengers)),B=Object(r.a)(y,2),A=B[0],S=B[1],O=Object(u.useState)(!1),P=Object(r.a)(O,2),j=P[0],F=P[1],k=Object(u.useState)({}),M=Object(r.a)(k,2),x=M[0],D=M[1];function T(e){e.preventDefault(),function(){var e={};return w.name||(e.name="Name is required."),D(e),0===Object.keys(e).length}()&&(F(!0),m(w).then((function(){F(!1),I.toast.success("Passenger saved"),g.push("/admin/passengers/"+o)})).catch((function(e){F(!1),D({onSave:e.message})})))}return Object(u.useEffect)((function(){0===p.length&&c().catch((function(e){return alert("Loading flights failed "+e)})),0===a.length?s().catch((function(e){return alert("Loading passengers failed "+e)})):p.length>0&&(C(Object(l.a)({},h.passenger)),S(Object(n.a)(h.flightPassengers)))}),[h.flightPassengers]),d.a.createElement(d.a.Fragment,null,0===a.length||0===p.length?d.a.createElement(E.a,null):d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-md-7"},d.a.createElement(v,{passenger:w,onSave:T,onChange:function(e){var a=e.target,s=a.name,n=a.value;C((function(e){return"passport"===s||"wheelChair"===s?Object(l.a)({},e,Object(t.a)({},s,"true"===n)):Object(l.a)({},e,Object(t.a)({},s,n))}))},saving:j,errors:x})),d.a.createElement("div",{className:"col-md-5"},d.a.createElement(b.a,{passengers:A,passenger:w,select:function(e){var a=w.wheelChair&&w.infants>0?"both":w.infants>0?"infants":w.wheelChair?"wheelChair":"reserved";C((function(s){var t=A.filter((function(a){return a.seat===e.number})).length>0;return Object(l.a)({},s,{seat:t&&s.seat===e.number?"":t?s.seat:e.number,status:t&&s.seat===e.number?"available":a})})),S((function(s){var t=A.filter((function(a){return a.seat===e.number})).length>0;return s.map((function(s){return s.id===w.id?s.seat===e.number?Object(l.a)({},s,{status:"available",seat:""}):t?s:Object(l.a)({},s,{seat:e.number,status:a}):s}))}))},onSave:T,backUrl:"/admin/passengers/"+o,isAdmin:!0})))))}))},76:function(e,a){e.exports={mealPreferences:{1:{id:1,value:"VEG"},2:{id:2,value:"NON-VEG"},3:{id:3,value:"NO MEAL"}},newPassenger:{id:null,name:"",pnr:"",flightId:null,ancillary:[],wheelChair:null,infants:0,seat:"",status:"available",mealPreference:null,specialMeals:[],purchase:[],passport:null,address:"",dob:""},newAncillaries:{id:null,value:[]},flights:[{id:1,name:"E301",departure:"13:00",destination:"Hyderabad",passengers:3,ancillariesId:1,purchases:{1:{id:1,value:"fitbit"},2:{id:2,value:"Smartwatch"},3:{id:3,value:"Bluetooth speaker"},4:{id:4,value:"EarPods"}},specialMeals:{1:{id:1,value:"Veg Sandwich"},2:{id:2,value:"Beverages"},3:{id:3,value:"Biriyani"},4:{id:4,value:"Fried Rice"}}},{id:2,name:"E302",departure:"14:00",destination:"Delhi",passengers:2,ancillariesId:2,purchases:{1:{id:1,value:"fitbit"},2:{id:2,value:"Smartwatch"},3:{id:3,value:"Bluetooth speaker"},4:{id:4,value:"EarPods"}},specialMeals:{1:{id:1,value:"Veg Sandwich"},2:{id:2,value:"Beverages"},3:{id:3,value:"Biriyani"},4:{id:4,value:"Fried Rice"}}},{id:3,name:"E303",departure:"15:00",destination:"Mumbai",passengers:3,ancillariesId:3,purchases:{1:{id:1,value:"fitbit"},2:{id:2,value:"Smartwatch"},3:{id:3,value:"Bluetooth speaker"},4:{id:4,value:"EarPods"}},specialMeals:{1:{id:1,value:"Veg Sandwich"},2:{id:2,value:"Beverages"},3:{id:3,value:"Biriyani"},4:{id:4,value:"Fried Rice"}}},{id:4,name:"E304",departure:"12:00",destination:"Jaipur",passengers:0,ancillariesId:4,purchases:{1:{id:1,value:"fitbit"},2:{id:2,value:"Smartwatch"},3:{id:3,value:"Bluetooth speaker"},4:{id:4,value:"EarPods"}},specialMeals:{1:{id:1,value:"Veg Sandwich"},2:{id:2,value:"Beverages"},3:{id:3,value:"Biriyani"},4:{id:4,value:"Fried Rice"}}}],passengers:[{id:1,name:"Scott Allen",pnr:"IND101",flightId:1,ancillary:[],wheelChair:!1,infants:0,seat:"",status:"available",mealPreference:1,purchase:[1],specialMeals:[],passport:!0,address:"xyz",dob:"1995-12-10"},{id:2,name:"Corey Hose",pnr:"IND102",flightId:1,ancillary:[4],wheelChair:!1,infants:0,seat:"1B",status:"reserved",mealPreference:2,purchase:[2],specialMeals:[1],passport:!0,address:"xyd",dob:"1994-12-10"},{id:3,name:"James",pnr:"IND103",flightId:1,ancillary:[],wheelChair:!0,infants:0,seat:"2A",status:"wheelChair",mealPreference:1,purchase:[],specialMeals:[1,2],passport:!1,address:"xyq",dob:"1995-12-11"},{id:4,name:"Bond",pnr:"IND104",flightId:2,ancillary:[1],wheelChair:!1,infants:1,seat:"2A",status:"infants",mealPreference:3,purchase:[],specialMeals:[3],passport:!0,address:"",dob:"1994-12-10"},{id:5,name:"Kevin",pnr:"IND105",flightId:2,ancillary:[],wheelChair:!1,infants:1,seat:"4A",status:"infants",mealPreference:1,purchase:[3],specialMeals:[4],passport:!1,address:"xlz",dob:""},{id:6,name:"Roger",pnr:"IND106",flightId:3,ancillary:[],wheelChair:!0,infants:0,seat:"1A",status:"wheelChair",mealPreference:3,purchase:[1],specialMeals:[2,3],passport:!0,address:"",dob:""},{id:7,name:"Sai",pnr:"IND107",flightId:3,ancillary:[],wheelChair:!1,infants:0,seat:"2B",status:"reserved",mealPreference:2,purchase:[1,3],specialMeals:[],passport:!0,address:"tyz",dob:"1995-12-01"},{id:8,name:"Rahul",pnr:"IND108",flightId:3,ancillary:[1],wheelChair:!1,infants:0,seat:"3A",status:"reserved",mealPreference:3,purchase:[],specialMeals:[],passport:!1,address:"pyz",dob:""}],purchases:{1:{id:1,value:"fitbit"},2:{id:2,value:"Smartwatch"},3:{id:3,value:"Bluetooth speaker"},4:{id:4,value:"EarPods"}},ancillaries:[{id:1,value:{1:{id:1,value:"seat-plus"},2:{id:2,value:"Excess Baggage"},3:{id:3,value:"Fast Forward"},4:{id:4,value:"Travel Assistance"}}},{id:2,value:{1:{id:1,value:"seat-plus"},2:{id:2,value:"Excess Baggage"},3:{id:3,value:"Fast Forward"},4:{id:4,value:"Travel Assistance"}}},{id:3,value:{1:{id:1,value:"seat-plus"},2:{id:2,value:"Excess Baggage"},3:{id:3,value:"Fast Forward"},4:{id:4,value:"Travel Assistance"}}},{id:4,value:{1:{id:1,value:"seat-plus"},2:{id:2,value:"Excess Baggage"},3:{id:3,value:"Fast Forward"},4:{id:4,value:"Travel Assistance"}}}],newFlight:{id:null,name:"",departure:"",destination:"",passengers:null,ancillariesId:null,purchases:{},specialMeals:{}},seatMaps:[{id:1,seatmap:[{id:1,number:"1A",status:"reserved",passengerId:1},{id:2,number:"1B",status:"reserved",passengerId:2},{id:3,number:"2A",status:"reserved",passengerId:3},{id:4,number:"2B",status:"available",passengerId:null},{id:5,number:"3A",status:"available",passengerId:null},{id:6,number:"3B",status:"available",passengerId:null},{id:7,number:"4A",status:"available",passengerId:null},{id:8,number:"4B",status:"available",passengerId:null}]},{id:2,seatmap:[{id:1,number:"1A",status:"available",passengerId:null},{id:2,number:"1B",status:"available",passengerId:null},{id:3,number:"2A",status:"reserved",passengerId:4},{id:4,number:"2B",status:"available",passengerId:null},{id:5,number:"3A",status:"available",passengerId:null},{id:6,number:"3B",status:"available",passengerId:null},{id:7,number:"4A",status:"reserved",passengerId:5},{id:8,number:"4B",status:"available",passengerId:null}]},{id:3,seatmap:[{id:1,number:"1A",status:"reserved",passengerId:6},{id:2,number:"1B",status:"available",passengerId:null},{id:3,number:"2A",status:"available",passengerId:null},{id:4,number:"2B",status:"reserved",passengerId:7},{id:5,number:"3A",status:"reserved",passengerId:8},{id:6,number:"3B",status:"available",passengerId:null},{id:7,number:"4A",status:"available",passengerId:null},{id:8,number:"4B",status:"available",passengerId:null}]},{id:4,seatmap:[{id:1,number:"1A",status:"available",passengerId:null},{id:2,number:"1B",status:"available",passengerId:null},{id:3,number:"2A",status:"available",passengerId:null},{id:4,number:"2B",status:"available",passengerId:null},{id:5,number:"3A",status:"available",passengerId:null},{id:6,number:"3B",status:"available",passengerId:null},{id:7,number:"4A",status:"available",passengerId:null},{id:8,number:"4B",status:"available",passengerId:null}]}],newSeatMap:{id:1,seatmap:[{id:1,number:"1A",status:"available",passengerId:null},{id:2,number:"1B",status:"available",passengerId:null},{id:3,number:"2A",status:"available",passengerId:null},{id:4,number:"2B",status:"available",passengerId:null},{id:5,number:"3A",status:"available",passengerId:null},{id:6,number:"3B",status:"available",passengerId:null},{id:7,number:"4A",status:"available",passengerId:null},{id:8,number:"4B",status:"available",passengerId:null}]},newSeat:{id:null,number:"",status:"",passengerId:null}}},77:function(e,a,s){"use strict";var t=s(8),n=s(75),l="https://my-json-server.typicode.com/rajat-agrvm/mock-json-server/flights/";function r(){return function(e){return fetch(l).then(n.b).catch(n.a).then((function(a){e(function(e){return{type:t.f,flights:e}}(a))})).catch((function(e){throw e}))}}function i(e){return function(a,s){return function(e){return fetch(l+(e.id||""),{method:e.id?"PUT":"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(n.b).catch(n.a)}(e).then((function(s){e.id?a(function(e){return{type:t.i,flight:e}}(s)):a(function(e){return{type:t.b,flight:e}}(s))})).catch((function(e){throw e}))}}s.d(a,"a",(function(){return r})),s.d(a,"b",(function(){return i}))},91:function(e,a,s){"use strict";var t=s(0),n=s.n(t),l=(s(92),s(76)),r=s(17);a.a=function(e){var a=e.passenger,s=e.passengers,t=e.select,i=e.onSave,u=e.backUrl,d=e.inFlight,c=void 0!==d&&d,m=e.isAdmin,o=void 0!==m&&m,v=e.saving,p=void 0!==v&&v,g=c?s.map((function(e){return e.seat&&e.specialMeals.length>0?{seat:e.seat,status:"special-meal"}:e.seat?{seat:e.seat,status:"reserved"}:{}})):s.map((function(e){var a=e.wheelChair&&e.infants>0?"both":e.infants>0?"infants":e.wheelChair?"wheelChair":"reserved";return e.seat?{seat:e.seat,status:a}:{}}));return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-8"},l.newSeatMap.seatmap.map((function(e){return n.a.createElement("div",{key:e.id},n.a.createElement("div",{id:e.id,name:e.number,className:a&&a.seat===e.number?"selected":s.length>0?(g.find((function(a){return a.seat===e.number}))||{status:"available"}).status:e.status,onClick:a&&function(){return t({id:e.id,number:e.number})}},n.a.createElement("h4",{id:"seat-number"},e.number)),parseInt(e.id,10)%2==0&&n.a.createElement("div",{className:"clearBoth"}))})),n.a.createElement("div",{className:"row"},a&&!o&&n.a.createElement("div",{className:"col"},n.a.createElement("button",{style:{marginTop:20},className:"btn btn-primary",onClick:a&&i},p?"saving..":"save")),n.a.createElement("div",{className:"col"},n.a.createElement(r.b,{style:{marginTop:20},className:"btn btn-primary",to:u},"Back")))),n.a.createElement("div",{className:"col-4"},n.a.createElement("div",{className:"colorCode",style:{background:"#d8d8d8"}}),"Available",n.a.createElement("div",{className:"colorCode",style:{background:"#ffa500"}}),"Reserved",c?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"colorCode",style:{background:"#ac0788"}}),"Special Meal"):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"colorCode",style:{background:"#3366cc"}}),"selected",n.a.createElement("div",{className:"colorCode",style:{background:"#c52b44"}}),"WheelChair",n.a.createElement("div",{className:"colorCode",style:{background:"#ac0788"}}),"Infants",n.a.createElement("div",{className:"colorCode",style:{background:"#04640c"}}),"WheelChair + Infants"))),a&&n.a.createElement("p",{className:"information"},"**Click on the same seat to de-select"))}},92:function(e,a,s){},93:function(e,a,s){"use strict";var t=s(0),n=s.n(t);a.a=function(e){var a=e.name,s=e.label,t=e.onChange,l=e.defaultOption,r=e.value,i=e.error,u=e.options;return n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:a},s),n.a.createElement("div",{className:"field"},n.a.createElement("select",{name:a,value:r,onChange:t,className:"form-control"},n.a.createElement("option",{value:""},l),u.map((function(e){return n.a.createElement("option",{key:e.value,value:e.value},e.text)}))),i&&n.a.createElement("div",{className:"alert alert-danger"},i)))}}}]);
//# sourceMappingURL=9.bundle.js.map